<html>
<head>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/css/bootstrap.min.css" integrity="sha384-PDle/QlgIONtM1aqA2Qemk5gPOE7wFq8+Em+G/hmo5Iq0CCmYZLv3fVRDJ4MMwEA" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">


    <style>
        #c {
            left: 0px;
            top: -20px;
            position: relative;
            /*z-index: -1;*/
        }
        #table {
            /*z-index: 1;*/
        }
        .table-wrapper-scroll-y {
            display: block;
            max-height: 300px;
            overflow-y: auto;
            -ms-overflow-style: -ms-autohiding-scrollbar;
        }
    </style>
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/createjs.min.js"></script>
    <script src="js/preloadjs.min.js"></script>
    <script src="js/soundjs.min.js"></script>
    <script src="js/tweenjs.min.js"></script>
    <script src="https://code.createjs.com/easeljs-0.8.2.min.js"></script>


    <script>
        function init() {
            let stage = new createjs.Stage("c");
            stage.canvas.width  = window.innerWidth;
            stage.canvas.height  = window.innerHeight - 300;

            stage.enableMouseOver();
            createjs.Touch.enable(stage);
            console.log( createjs.Touch.isSupported())


            let start = 0;
            let S = {};
            let L = [];


            let n = 9;
            let R = 130, RR = 100;

            if(n == 3) {
                RR = 65;
                R = 95;
            }else if(n == 4) {
                RR = 65;
                R = 95;
            }else if(n == 6) {
                RR = 120;
                R = 150;
            }else if(n == 7) {
                RR = 100;
                R = 130;
            }else if(n == 8) {
                RR = 100;
                R = 130;
            }else if(n == 9) {
                RR = 120;
                R = 150;
            }
            let C = [];
            let cont = new createjs.Container();
            let ce = new createjs.Shape();
            ce.graphics.beginFill("#000000").drawCircle(0, 0, R);
            ce.x = 200;
            ce.y = -30;

            let text = new createjs.Text("", "50px Arial", "#ffffff");
            text.x = ce.x;
            text.y = ce.y - R - 80;
            text.textAlign = "center";
            cont.addChild(ce);
            cont.addChild(text);





            let ch = ['A','M','Ã‡','D','E', 'F', 'T', 'T', 'T', 'T', 'T'];
            for(let i = 0; i < n; i++) {
                let text = new createjs.Text(ch[i], "50px Arial", "#ffffff");
                text.x = -20+6;
                text.y = -20+6-3-2-2;
                let circle = new createjs.Shape();
                circle.alpha = 0.01;
                circle.graphics.beginFill("#ff00b0").drawCircle(0, 0, 35);


                let c = new createjs.Container();
                c.addChild(circle);
                c.addChild(text);

                C.push({t:text, c : circle, cont : c});
                cont.addChild(c);
            }

            stage.addChild(cont);

            cont.x = (window.innerWidth / 2) - 210;
            cont.y = (window.innerHeight) - 450;



            let angle = 0;
            let d = 2 * Math.PI / n;
            for(let i = 0; i < n; i++) {
                let t = C[i];
                t.cont.x = ce.x;
                t.cont.y = ce.y - RR;
                var X = Math.cos(angle) * (t.cont.x - ce.x) - Math.sin(angle) * (t.cont.y-ce.y) + ce.x;
                var Y = Math.sin(angle) * (t.cont.x - ce.x) + Math.cos(angle) * (t.cont.y - ce.y) + ce.y;
                t.cont.x = X;
                t.cont.y = Y;
                angle += d;
            }


            let command = null;
            for(let i = 0; i < n; i++) {
                let t = C[i];
                let j = i;
                t.cont.on("mousedown",function(evt) {
                    console.log("mousedown")
                    start = 1;
                    S[j] = 1;
                    console.log(t.t.text);
                    text.text = t.t.text;
                    t.c.alpha = 1;
                    var line = new createjs.Shape();
                    line.graphics.setStrokeStyle(20);
                    line.graphics.beginStroke("#ff00b0");
                    line.graphics.moveTo(t.cont.x, t.cont.y);
                    console.log(t.cont.x, t.cont.y)
                    command = line.graphics.lineTo(t.cont.x, t.cont.y).command;
                    line.graphics.endStroke();
                    cont.addChild(line);
                    cont.setChildIndex(line, 1);
                    L.push(line);

                    stage.update();
                });


            }

            stage.update();



            stage.canvas.ontouchend = function(e){
                S = {};
                start = 0;
                text.text = "";

                for(let i = 0; i < n; i++) {
                    C[i].c.alpha = 0.01;
                }
                for(let i = 0; i < L.length; i++) {
                    cont.removeChild(L[i]);
                }
                stage.update();
            };
            stage.canvas.onmouseup = function(e){
                S = {};
                start = 0;
                text.text = "";

                for(let i = 0; i < n; i++) {
                    C[i].c.alpha = 0.01;
                }
                for(let i = 0; i < L.length; i++) {
                    cont.removeChild(L[i]);
                }
                stage.update();
            };

            stage.canvas.style.backgroundColor = "#2a2a32";





            stage.on("stagemousemove" , function (e) {
                if(start == 0) return;
                command.x = e.stageX-cont.x;
                command.y = e.stageY-cont.y;
                for(let i = 0; i < n;i++) {
                    let x = e.stageX-cont.x-C[i].cont.x;
                    let y = e.stageY-cont.y-C[i].cont.y;


                    let p = new createjs.Point(x, y);
                    if(S[i] == undefined && C[i].cont.hitTest(p.x, p.y)) {
                        text.text += C[i].t.text;
                        S[i] = 0;
                        C[i].c.alpha = 1;
                        command.x = C[i].cont.x;
                        command.y = C[i].cont.y;
                        var line = new createjs.Shape();
                        line.graphics.setStrokeStyle(20);
                        line.graphics.beginStroke("#ff00b0");
                        line.graphics.moveTo(C[i].cont.x, C[i].cont.y);
                        command = line.graphics.lineTo(C[i].cont.x, C[i].cont.y).command;
                        line.graphics.endStroke();

                        cont.addChild(line);
                        cont.setChildIndex(line, 1);
                        L.push(line);


                    }
                }

                stage.update();
            })


            stage.update();
        }

    </script>
</head>

<body>


<body onload="init();">
<div class="table-wrapper-scroll-y">
    <table class="table table-sm table-dark">
        <thead>
        <tr>
            <th scope="col">Yer</th>
            <th scope="col"> </th>
            <th scope="col">Ad</th>
            <th scope="col">Reyting</th>
        </tr>
        </thead>
        <tbody id="table">

        <tr class='clickable-row' data-href='http://35.231.39.26:3000/users/getUser?id="+ps[i]._id'>
            <th class='align-middle' scope="row">1</th>
            <td class='align-middle'><img src='http://35.231.39.26:3000/profile/images/default.jpg' width='40px' height='40px'></td>
            <td class='align-middle'>Toghrul Gasimov</td>
            <td class='align-middle'>5</td>
        </tr>
        <tr class='clickable-row' data-href='http://35.231.39.26:3000/users/getUser?id="+ps[i]._id'>
            <th class='align-middle' scope="row">1</th>
            <td class='align-middle'><img src='http://35.231.39.26:3000/profile/images/default.jpg' width='40px' height='40px'></td>
            <td class='align-middle'>Toghrul Gasimov</td>
            <td class='align-middle'>5</td>
        </tr>
        <tr class='clickable-row' data-href='http://35.231.39.26:3000/users/getUser?id="+ps[i]._id'>
            <th class='align-middle' scope="row">1</th>
            <td class='align-middle'><img src='http://35.231.39.26:3000/profile/images/default.jpg' width='40px' height='40px'></td>
            <td class='align-middle'>Toghrul Gasimov</td>
            <td class='align-middle'>5</td>
        </tr>
        <tr class='clickable-row' data-href='http://35.231.39.26:3000/users/getUser?id="+ps[i]._id'>
            <th class='align-middle' scope="row">1</th>
            <td class='align-middle'><img src='http://35.231.39.26:3000/profile/images/default.jpg' width='40px' height='40px'></td>
            <td class='align-middle'>Toghrul Gasimov</td>
            <td class='align-middle'>5</td>
        </tr>
        <tr class='clickable-row' data-href='http://35.231.39.26:3000/users/getUser?id="+ps[i]._id'>
            <th class='align-middle' scope="row">1</th>
            <td class='align-middle'><img src='http://35.231.39.26:3000/profile/images/default.jpg' width='40px' height='40px'></td>
            <td class='align-middle'>Toghrul Gasimov</td>
            <td class='align-middle'>5</td>
        </tr>
        <tr class='clickable-row' data-href='http://35.231.39.26:3000/users/getUser?id="+ps[i]._id'>
            <th class='align-middle' scope="row">1</th>
            <td class='align-middle'><img src='http://35.231.39.26:3000/profile/images/default.jpg' width='40px' height='40px'></td>
            <td class='align-middle'>Toghrul Gasimov</td>
            <td class='align-middle'>5</td>
        </tr>
        <tr class='clickable-row' data-href='http://35.231.39.26:3000/users/getUser?id="+ps[i]._id'>
            <th class='align-middle' scope="row">1</th>
            <td class='align-middle'><img src='http://35.231.39.26:3000/profile/images/default.jpg' width='40px' height='40px'></td>
            <td class='align-middle'>Toghrul Gasimov</td>
            <td class='align-middle'>5</td>
        </tr>
        <tr class='clickable-row' data-href='http://35.231.39.26:3000/users/getUser?id="+ps[i]._id'>
            <th class='align-middle' scope="row">1</th>
            <td class='align-middle'><img src='http://35.231.39.26:3000/profile/images/default.jpg' width='40px' height='40px'></td>
            <td class='align-middle'>Toghrul Gasimov</td>
            <td class='align-middle'>5</td>
        </tr>
        <tr class='clickable-row' data-href='http://35.231.39.26:3000/users/getUser?id="+ps[i]._id'>
            <th class='align-middle' scope="row">1</th>
            <td class='align-middle'><img src='http://35.231.39.26:3000/profile/images/default.jpg' width='40px' height='40px'></td>
            <td class='align-middle'>Toghrul Gasimov</td>
            <td class='align-middle'>5</td>
        </tr>
        </tbody>
    </table>

</div>
<canvas id="c" width="500" height="500">
    alternate content
</canvas>




<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/js/bootstrap.min.js" integrity="sha384-7aThvCh9TypR7fIc2HV4O/nFMVCBwyIUKL8XCtKE+8xgCgl/PQGuFsvShjr74PBp" crossorigin="anonymous"></script>

</body>
</html>